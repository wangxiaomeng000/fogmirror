# AI 认知映射系统 - 测试方案

## 测试目标
验证系统能够正确实现基于事实导向的认知分析，并通过三层可视化和生物体模型直观展示用户的认知状态。

## 测试范围

### 1. 功能测试

#### 1.1 事实提取引擎测试
- **输入验证**
  - 纯事实陈述："昨天下午3点，我在会议室见了李经理"
  - 混合陈述："我觉得他总是针对我，昨天又批评了我的方案"
  - 纯主观陈述："我觉得一切都很糟糕"
  
- **预期结果**
  - 正确识别时间、地点、人物信息
  - 分离事实与主观判断
  - 标记缺失的关键信息

#### 1.2 认知偏见检测测试
- **测试用例**
  ```
  输入1: "他们总是忽视我的建议"
  预期: 检测到过度概括偏见
  
  输入2: "她肯定认为我不够好"
  预期: 检测到读心术偏见
  
  输入3: "要么成功要么失败"
  预期: 检测到二元思维偏见
  ```

#### 1.3 图片分析测试
- **测试场景**
  - 上传包含人物的办公室场景图片
  - 上传包含文字的文档图片
  - 上传风景图片
  
- **验证点**
  - 正确识别物体数量和类型
  - 准确描述人物表情和位置
  - 发现图片中的异常点

#### 1.4 三层认知可视化测试
- **事实层测试**
  - 输入5个具体事实
  - 验证蓝色节点正确显示
  - 验证位置分布合理
  
- **洞见层测试**
  - 验证从事实生成的洞见
  - 检查金色节点显示
  - 验证洞见与事实的关联线
  
- **观念层测试**
  - 验证概念提取准确性
  - 检查红色节点显示
  - 验证三层之间的层次关系

#### 1.5 生物体模型测试
- **基础形态测试**
  - 验证核心、细胞质、细胞膜结构
  - 检查动画效果（脉动、流动、呼吸）
  
- **演化测试**
  - 添加新对话内容
  - 验证生物体形态变化
  - 检查健康度、成熟度、复杂度指标

### 2. 集成测试

#### 2.1 完整对话流程测试
```
步骤1: 用户输入："我想聊聊工作上的问题"
验证: AI引导提供具体信息

步骤2: 用户输入："昨天下午，老板在会议上当众批评了我"
验证: 提取时间、人物、地点、事件

步骤3: 上传会议室照片
验证: 分析图片细节，发现异常点

步骤4: 继续对话5轮
验证: 认知地图逐步完善，生物体模型演化
```

#### 2.2 视图切换测试
- 在层级视图和生物体视图之间切换
- 验证数据同步
- 检查动画过渡效果

### 3. 性能测试

#### 3.1 响应时间测试
- AI响应时间 < 3秒
- 图片分析时间 < 2秒
- 3D渲染帧率 > 30fps

#### 3.2 并发测试
- 同时处理5个用户会话
- 验证响应时间不超过5秒

### 4. 用户体验测试

#### 4.1 引导效果测试
- 新用户能否理解事实导向的对话方式
- 提示信息是否清晰
- 错误提示是否友好

#### 4.2 可视化直观性测试
- 用户能否理解三层结构含义
- 生物体模型是否直观反映认知状态
- 交互操作是否流畅

## 测试数据准备

### 场景1：工作压力
```
对话1: "最近工作压力很大"
对话2: "上周五，项目经理说我的方案不行"
对话3: "他直接说：'这个方案完全没有考虑成本'"
对话4: "会议记录显示预算超支30%"
图片: 上传项目甘特图截图
```

### 场景2：人际关系
```
对话1: "我和同事相处有些问题"
对话2: "昨天午餐时，三个同事都没叫我"
对话3: "我看到他们一起去了楼下餐厅"
对话4: "之前我拒绝了他们的聚餐邀请"
图片: 上传办公室合照
```

### 场景3：决策困难
```
对话1: "我在考虑是否换工作"
对话2: "现在月薪15K，新公司offer 20K"
对话3: "通勤时间会从30分钟增加到1小时"
对话4: "家人建议我留在现在的公司"
图片: 上传offer截图
```

## 测试工具

### 自动化测试脚本
```javascript
// test/factExtraction.test.js
describe('事实提取引擎', () => {
  test('提取时间信息', () => {
    const result = extractFacts("昨天下午3点开会");
    expect(result.temporalInfo.time).toBe("昨天下午3点");
  });
  
  test('识别主观陈述', () => {
    const result = extractFacts("我觉得他针对我");
    expect(result.subjectiveStatements).toContain("我觉得他针对我");
  });
});
```

### 性能监控
```javascript
// test/performance.test.js
describe('性能测试', () => {
  test('AI响应时间', async () => {
    const start = Date.now();
    await aiService.processMessage("测试消息");
    const duration = Date.now() - start;
    expect(duration).toBeLessThan(3000);
  });
});
```

## 测试执行计划

### 第一阶段：单元测试（1天）
- 测试事实提取引擎
- 测试认知分析引擎
- 测试图片分析器
- 测试生物体模型计算

### 第二阶段：集成测试（2天）
- 测试完整对话流程
- 测试前后端数据同步
- 测试3D可视化更新

### 第三阶段：系统测试（1天）
- 端到端测试
- 性能测试
- 兼容性测试

### 第四阶段：用户测试（1天）
- 邀请5名测试用户
- 收集使用反馈
- 优化用户体验

## 验收标准

### 功能验收
- [ ] 事实提取准确率 > 90%
- [ ] 认知偏见检测准确率 > 80%
- [ ] 图片异常识别准确率 > 70%
- [ ] 三层可视化正确显示
- [ ] 生物体模型动态演化

### 性能验收
- [ ] AI响应时间 < 3秒
- [ ] 页面加载时间 < 2秒
- [ ] 3D渲染流畅无卡顿

### 用户体验验收
- [ ] 新用户5分钟内理解系统
- [ ] 对话引导清晰有效
- [ ] 错误处理友好
- [ ] 视觉效果专业

## 问题跟踪

### 已知问题
1. MongoDB连接失败，使用mock存储
2. OpenRouter API key无效，使用mock服务

### 待解决问题
- [ ] 实现真实的图像识别API集成
- [ ] 优化生物体模型渲染性能
- [ ] 添加更多认知偏见类型检测

## 测试报告模板

```markdown
# 测试报告 - [日期]

## 测试概况
- 测试版本：v1.0.0
- 测试环境：开发环境
- 测试时间：[开始时间] - [结束时间]

## 测试结果摘要
- 通过用例数：X
- 失败用例数：X
- 阻塞问题数：X

## 详细测试结果
[列出每个测试用例的执行结果]

## 问题列表
[列出发现的所有问题]

## 建议
[提出改进建议]
```